<?xml version="1.0" encoding="utf-8"?>
<!--
  Language: XML
  $Author$
  $Date$
  $Revision$
  $Copyright: [2010-2013] The CoSMo Company, All Rights Reserved $
-->
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
    "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<section>
  <title>Installation</title>
  <section>
    <title>Ubuntu 32 (11.10 or later)</title>
    <section>
      <title>Dependencies</title>
      <section>
        <title>CMake</title>
        <programlisting>
  sudo apt-get install cmake
  sudo apt-get install cmake-curses-gui
        </programlisting>
      </section>
      <section>
        <title>Subversion</title>
        <programlisting>
  sudo apt-get install subversion
        </programlisting>
      </section>
      <section>
        <title>Python 2.7</title>
        <programlisting>
  sudo apt-get install python2.7
        </programlisting>
      </section>
      <section>
        <title>SWIG 2.0</title>
        <programlisting>
  sudo apt-get install swig2.0
        </programlisting>
      </section>
      <section>
        <title>libXML2</title>
        <programlisting>
  sudo apt-get install libxml2
        </programlisting>
      </section>
      <section>
        <title>Autoconf</title>
        <programlisting>
  sudo apt-get install autoconf
        </programlisting>
      </section>
      <section>
        <title>Automake</title>
        <programlisting>
  sudo apt-get install automake
        </programlisting>
      </section>
      <section>
        <title>Libtool</title>
        <programlisting>
  sudo apt-get install libtool
        </programlisting>
      </section>
      <section>
        <title>XSLT processor</title>
        <programlisting>
  sudo apt-get install xsltproc
        </programlisting>
      </section>
      <section>
        <title>Expat</title>
        <programlisting>
  sudo apt-get install libexpat1 libexpat1-dev
        </programlisting>
      </section>
      <section>
        <title>libbzip2</title>
        <para>Download the latest package on
<ulink url="http://www.bzip.org/">BZIP2 official website</ulink>, then extract
it. Go to the newly created directory and execute the following commands:
        </para>
        <programlisting>
  make
  make install
        </programlisting>
      </section>
      <section>
        <title>easy_install</title>
        <itemizedlist>
          <listitem>
            <para>Download the <literal>ez_setup.py</literal> file located at:
<ulink url="https://bitbucket.org/pypa/setuptools/raw/bootstrap/ez_setup.py">
https://bitbucket.org/pypa/setuptools/raw/bootstrap/ez_setup.py
</ulink>.</para>
          </listitem>
          <listitem>
            <para>Execute the following command in the directory containing
<literal>ez_setup.py</literal>:
              <programlisting>
  python ez_setup.py
              </programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>
      <section>
        <title>matplotlib</title>
        <para>
First of all easy_install should be installed (see previous paragraph for
installation details). When it is done, simply open a command shell and type:
        </para>
        <programlisting>
  sudo easy_install matplotlib
        </programlisting>
      </section>
      <section>
        <title>libSBML</title>
        <para>Download the latest stable version on
<ulink url="http://sbml.org/Software/libSBML">libSBML official website</ulink>,
then run the installer.</para>
      </section>
    </section>
    <section>
      <title>BioPreDyn integrated software suite prototype</title>
      <para>First of all the project source code must be checked-out using
<literal>Subversion</literal>:</para>
      <programlisting>
  svn co https://thecosmocompany.com/svn/repos/SVN/BioPreDyn
      </programlisting>
      <para>When <literal>Subversion</literal> is done with it, go the freshly
checked-out folder:
      </para>
      <programlisting>
  cd BioPreDyn/trunk
  mkdir BUILD
  cd BUILD
  cmake ..
  make
  make install
  make test
      </programlisting>
      <para><literal>CMake</literal> options can be more finely tuned by using
<literal>ccmake</literal> instead of <literal>cmake</literal>.
      </para>
    </section>
    <section>
      <title>Windows XP 32</title>
      <section>
        <title>CMake</title>
        <para>
          <emphasis role="em">TODO</emphasis>
        </para>
      </section>
      <section>
        <title>Microsoft Visual Studio 2010</title>
        <para>
          <emphasis role="em">TODO</emphasis>
        </para>
      </section>
      <section>
        <title>libSBML</title>
        <para>
          <emphasis role="em">TODO</emphasis>
        </para>
      </section>
    </section>
  </section>
  <section>
    <title>Known problems</title>
    <itemizedlist>
      <listitem>
        <para>libSBML installation (Windows XP32): linking problem
          related to libiconv when building the library with
          cosmo-externals (for libxml); the file encoding.h must be
          modified in order to include &lt;libiconv/iconv.h&gt;
          instead
          of &lt;iconv.h&gt;.
        </para>
      </listitem>
      <listitem>
        <para>
          libSEDML installation (Ubuntu 11.10 and later): Python files are not
          completely installed after running the installation
          process. A
          way to complete the installation consists in
          manually putting
          the required files in
          ${INSTALL_DIR}/lib/python*/dist-packages
          and respecting
          the following folder hierarchy:
          <programlisting>
  ${INSTALL_DIR}/lib/python*/dist-packages/libsedml.pth
  ${INSTALL_DIR}/lib/python*/dist-packages/libsedml/_libsedml.so
  ${INSTALL_DIR}/lib/python*/dist-packages/libsedml/libsedml.py
  ${INSTALL_DIR}/lib/python*/dist-packages/libsedml.pyc
          </programlisting>
        </para>
      </listitem>
      <listitem>
        <para>COPASI python bindings installation (Ubuntu 11.10): no
          setup file can be found in the package, it therefore
          cannot be
          installed as a system library. The same solution
          than the one
          described for libsedml can be used (with
          COPASI files instead
          of libsedml files of course);
          alternatively, Eclipse users can
          simply link the
          copasi*_python*_linux_x86 folder as an external
          library
          (in the project properties).
        </para>
      </listitem>
      <listitem>
        <para>
          CellNOpt.wrapper installation (Windows XP32): the CellNOpt
          library in itself is not a problem; however, rpy2 is quite
          tricky to install on Windows platforms. The following
          steps
          gave satisfying results on Windows XP 32 bits:
          <itemizedlist spacing="compact">
            <listitem>
              <para>Install R 2.15.3 (other versions not tested -
                did not
                work with R 3.0.x)
              </para>
            </listitem>
            <listitem>
              <para>
                Install rpy2: compiling the sources on Windows
                proved to
                be painful and eventually unsuccessful.
                The only -
                unofficial - working binary distribution
                of this library
                was found here:
                <ulink url="https://bitbucket.org/breisfeld/rpy2_w32_fix/issue/1/binary-installer-for-win32">
                  https://bitbucket.org/breisfeld/rpy2_w32_fix/issue/1/binary-installer-for-win32
                </ulink>
                Install it:
                <itemizedlist spacing="compact">
                  <listitem>
                    <para>Add the path to R.dll to the PATH
                      environment
                      variable (in my case
                      D:\Env\R-2.15.3\bin\i386)
                    </para>
                  </listitem>
                  <listitem>
                    <para>Add the R_HOME environment variable (in my
                      case D:\Env\R-2.15.3)
                    </para>
                  </listitem>
                  <listitem>
                    <para>Add the R_USER environment variable (your
                      Windows username)
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                Install pywin32 (
                <ulink url="http://sourceforge.net/projects/pywin32">http://sourceforge.net/projects/pywin32
                </ulink>.
              </para>
            </listitem>
            <listitem>
              <para>
                Install cellnopt.wrapper; the best way to do so
                consists
                in using the easy_install tool:
                <programlisting>
  easy_install cellnopt.wrapper
                </programlisting>
              </para>
            </listitem>
          </itemizedlist>
        </para>
      </listitem>
    </itemizedlist>
  </section>
</section>